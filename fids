<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Live Flight Departures</title>

<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
<meta http-equiv="Pragma" content="no-cache"/>
<meta http-equiv="Expires" content="0"/>

<style>
    body { background:#001428; color:white; font-family:Arial; margin:0; }
    .header { background:#003366; padding:20px; text-align:center; font-size:30px; }
    table { width:100%; border-collapse:collapse; font-size:20px; }
    th,td { padding:12px; border-bottom:1px solid #004a80; }
    th { background:#003366; color:#aad4ff; }
</style>

</head>
<body>

<div class="header">Live Departures â€“ DXB Airport</div>

<table>
<thead>
<tr>
    <th>Airline</th>
    <th>Flight</th>
    <th>To</th>
    <th>Time</th>
    <th>Status</th>
</tr>
</thead>
<tbody id="flightData"></tbody>
</table>

<script>
async function loadFlights() {
    const url = "http://api.aviationstack.com/v1/flights?access_key=f76cc7a734cbd9daae6d9ec1e653f60a&dep_iata=DXB";

    try {
        const res = await fetch(url);
        const json = await res.json();
        const flights = json.data.slice(0, 20);

        let html = "";
        flights.forEach(f => {
            html += `
                <tr>
                    <td>${f.airline?.name || "-"}</td>
                    <td>${f.flight?.iata || "-"}</td>
                    <td>${f.arrival?.iata || "-"}</td>
                    <td>${f.departure?.scheduled || "-"}</td>
                    <td>${f.flight_status || "-"}</td>
                </tr>
            `;
        });

        document.getElementById("flightData").innerHTML = html;

    } catch (error) {
        console.error("Error loading flights", error);
    }
}

loadFlights();
setInterval(loadFlights, 30000);
</script>

</body>
</html>
